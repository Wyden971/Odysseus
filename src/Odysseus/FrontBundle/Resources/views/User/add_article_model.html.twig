{% extends 'OdysseusFrontBundle:User:column2.html.twig' %}

{% block content_title %}MON COMPTE - AJOUT D'UN ARTICLE{% endblock content_title %}

{% block column_content %}
    <!-- Page Content -->
    <div>

        <div class="row">
            <!-- Commande -->
            <div class="col-lg-12">
                <div class="row">
                    <div class="col-xs-12">
                        {% for flashMessage in app.session.flashbag.get('odysseus_front_user_add_article_model') %}

                            <div class="well text-center" style='margin-top: 20px;'>
                                <h1 class="text-center" style="margin:10px 0px 15px">{{ flashMessage }}</h1>
                                <h4 class="text-center">Retrouvez tous les détails de votre article dans votre <a href="{{path('odysseus_front_user_my_summary',{'id':app.user.id})}}">espace personnel</a>.</h4>
                            </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="row form-group">
                    <div class="col-xs-12">
                        <ul class="nav nav-pills nav-justified thumbnail setup-panel">
                            <li class="active"><a href="#step-1">
                                    <h4 class="list-group-item-heading">ARTICLE</h4>
                                    <p class="list-group-item-text">Informations de l'article</p>
                                </a></li>
                            <li class="disabled"><a href="#step-2">
                                    <h4 class="list-group-item-heading">MODÈLE</h4>
                                    <p class="list-group-item-text">Détails de votre vente</p>
                                </a></li>
                        </ul>
                    </div>
                </div>

                {{ form_start(form, {'method':'POST','attr':{'class' : 'form-horizontal form-register'} })}}
                <!-- ETAPE 1 -->
                <div class="row setup-content" id="step-1">
                    <div class="col-lg-12">
                        <div class="titleHeader clearfix">
                            <h3>Informations de l'article</h3>
                        </div>
                        {%if article is not null%}
                        <div class="well text-center hidden">
                                <h1 class="text-center" style="margin:10px 0px 15px">Article déja sélectionné</h1>
                                <h4 class="text-center"> Vous avez sélectionné {{article.brand}} {{article.name}}.</h4>
                            </div>
                            {%endif%}
                        <div class="form-group">
                            {{ form_label(form.name, 'Nom de l\'article *', {'label_attr': {'class': 'col-sm-3 control-label'} })}}
                            <div class="col-sm-9">
                                {{form_widget(form.name, {'attr' : {'class' : 'form-control','placeholder' : 'Entrez le nom de l\'article'} })}}
                                {{ form_errors(form.name) }}
                            </div>
                        </div>
                        <div class="form-group">
                            {{ form_label(form.brand, 'Marque *', {'label_attr': {'class': 'col-sm-3 control-label'} })}}
                            <div class="col-sm-9">
                                {{form_widget(form.brand, {'attr' : {'class' : 'form-control','placeholder' : 'Entrez la marque de l\'article'} })}}
                                {{ form_errors(form.brand) }}
                            </div>
                        </div>
                        <div class="form-group">
                            {{ form_label(form.description, 'Description *', {'label_attr': {'class': 'col-sm-3 control-label'} })}}
                            <div class="col-sm-9">
                                {{form_widget(form.description, {'attr' : {'class' : 'form-control','placeholder' : 'Entrez la description de l\'article'} })}}
                                {{ form_errors(form.description) }}
                            </div>
                        </div>
                        <div class="form-group">
                            {{ form_label(form.category, 'Catégorie *', {'label_attr': {'class': 'col-sm-3 control-label'} })}}
                            <div class="col-sm-9">
                                {{form_widget(form.category, {'attr' : {'class' : 'form-control'} })}}
                                {{ form_errors(form.category) }}
                            </div>
                        </div>
                        <button type="button" id="activate-step-2" class="btn btn-greend btn-long pull-right">Passer à l'étape suivante</button>
                    </div>
                </div>
                <!-- ETAPE 2 -->
                <div class="row setup-content" id="step-2">
                    <div class="col-lg-12">
                        <div class="titleHeader clearfix">
                            <h3>Détails de votre vente</h3>
                        </div>
                        <div class="form-group">
                            {{ form_label(form.models.price, 'Prix (en €) *', {'label_attr': {'class': 'col-sm-3 control-label'} })}}
                            <div class="col-sm-9">
                                {{form_widget(form.models.price, {'attr' : {'class' : 'form-control','placeholder' : 'Entrez le prix de l\'article'} })}}
                                {{ form_errors(form.models.price) }}
                            </div>
                        </div>
                        <div class="form-group">
                            {{ form_label(form.models.weight, 'Poids (en kg) *', {'label_attr': {'class': 'col-sm-3 control-label'} })}}
                            <div class="col-sm-9">
                                {{form_widget(form.models.weight, {'attr' : {'class' : 'form-control','placeholder' : 'Entrez le poids de l\'article'} })}}
                                {{ form_errors(form.models.weight) }}
                            </div>
                        </div>
                        <div class="form-group">
                            {{ form_label(form.models.height, 'Longueur (en cm) *', {'label_attr': {'class': 'col-sm-3 control-label'} })}}
                            <div class="col-sm-9">
                                {{form_widget(form.models.height, {'attr' : {'class' : 'form-control','placeholder' : 'Entrez la longueur de l\'article'} })}}
                                {{ form_errors(form.models.height) }}
                            </div>
                        </div>
                        <div class="form-group">
                            {{ form_label(form.models.width, 'Largeur (en cm) *', {'label_attr': {'class': 'col-sm-3 control-label'} })}}
                            <div class="col-sm-9">
                                {{form_widget(form.models.width, {'attr' : {'class' : 'form-control','placeholder' : 'Entrez la largeur de l\'article'} })}}
                                {{ form_errors(form.models.width) }}
                            </div>
                        </div>
                        <div class="form-group">
                            {{ form_label(form.models.depth, 'Epaisseur (en cm) *', {'label_attr': {'class': 'col-sm-3 control-label'} })}}
                            <div class="col-sm-9">
                                {{form_widget(form.models.depth, {'attr' : {'class' : 'form-control','placeholder' : 'Entrez l\épaisseur de l\'article'} })}}
                                {{ form_errors(form.models.depth) }}
                            </div>
                        </div>
                        <div class="form-group">
                            {{ form_label(form.models.status, 'État *', {'label_attr': {'class': 'col-sm-3 control-label'} })}}
                            <div class="col-sm-9">
                                {{form_widget(form.models.status, {'attr' : {'class' : 'form-control'} })}}
                                {{ form_errors(form.models.status) }}
                            </div>
                        </div>
                        <div class="form-group">
                            {{ form_label(form.models.image, 'Images *', {'label_attr': {'class': 'col-sm-3 control-label'} })}}
                            <div class="col-sm-9">
                                {%for image in form.models.image%}
                                    {{form_widget(image['file'], {'attr' : {'class' : ''} })}}
                                {%endfor%}
                                <p style="font-style:italic; color: #666; margin-top:5px">(format recommandé: 700x360)</p>
                                {{ form_errors(form.models.image) }}
                            </div>
                        </div>
                        <button type="submit" id="activate-step-3" class="btn btn-greend btn-long pull-right">Passer à l'étape suivante</button>
                    </div>
                </div>
                {{ form_end(form) }}
                <!-- ETAPE 3 -->
                <div class="row setup-content" id="step-3">
                    <div class="col-xs-12">
                        <div class="col-md-12 well text-center">
                            <h1 class="text-center" style="margin:10px 0px 15px">Votre article à été ajouté !</h1>
                            <h4 class="text-center">Retrouvez tous les détails de votre article dans votre <a href="{{ path('odysseus_front_user_my_summary')}}">espace personnel</a>.</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {%if app.request.attributes.get('idArticle') is not empty%}
        {%set tabdisabled = ['name','brand','description','category']%}
        <script type="text/javascript">
            {%for item in tabdisabled%}
                $("form [name='odysseus_adminbundle_article[{{item}}]']").parent().parent().hide();
                $("div.well.text-center.hidden").removeClass('hidden');
            {%endfor%}
        </script>
    {%endif%}
    <!-- /.page content -->
{% endblock %}